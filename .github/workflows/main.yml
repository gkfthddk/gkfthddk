name: Pull request comment
on:
  issue_comment:
    types: [created, edited, deleted]

jobs:
  pull_request_comment:
    runs-on: [ubuntu-latest]
    steps:
      - name: Add comment
        if: contains(github.event.comment.body, 'release')   # check the comment if it contains the keywords
        uses: actions/github-script@v6
        with:
          github-token: ${{secrets.GITHUB_TOKEN}}
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: 'ðŸš€ hello'
            })
      - name: Test
        if: contains(github.event.comment.body, '/test')  # check the comment if it contains the keywords
        env:
          t0_secret: ${{ secrets.T0BOT_TOKEN }}
        run: |
         echo start test
         curl -I "https://cmssdt.cern.ch/dmwm-jenkins/job/DMWM-T0-bot/build?token=$t0_secret"
      - name: Labeling
        if: contains(github.event.comment.body, 'label')   # check the comment if it contains the keywords
        uses: actions/github-script@v6
        with:
          script: |
            github.rest.issues.addLabels({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              labels: ['This is bot label']
            })
